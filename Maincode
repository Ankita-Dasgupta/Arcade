import sys,time,os,mysql.connector
from asciimatics.effects import Cycle, Stars
from asciimatics.renderers import FigletText
from asciimatics.scene import Scene
from asciimatics.screen import Screen
from asciimatics.effects import Stars, Print
from asciimatics.particles import RingFirework, SerpentFirework, StarFirework,PalmFirework
from asciimatics.renderers import SpeechBubble, FigletText, Rainbow
from asciimatics.scene import Scene
from asciimatics.screen import Screen
from asciimatics.exceptions import ResizeScreenError
from random import randint, choice
import os
from time import sleep
# The screen clear function
def screen_clear():
   # for mac and linux(here, os.name is 'posix')
   if os.name == 'posix':
      _ = os.system('clear')
   else:
      # for windows platfrom
      _ = os.system('cls')
print("")
sleep(5)
# now call funct
db=mysql.connector.connect(
    host="localhost",
    user="root",
    passwd="gaurav",
    database="userdata",
    )
mycursor = db.cursor()
def printanimation(message):
    for char in message:
            sys.stdout.write(char)
            sys.stdout.flush()
            time.sleep(0.01)
            if char!="\n":
                time.sleep(0.1)
            else:
                time.sleep(1)
def maingame():
    with open("Game Console.txt") as file:
        for i in range(5):
            for char in file.readline():
                printanimation(char)
            if i==1 or i==0:
                printanimation("...")
                time.sleep(1)
    printanimation("Please Enter The Name Of Your Character: ")
    name=input()
def gameover(screen):
    scenes = []
    effects = [Stars(screen, screen.width),Print(screen,SpeechBubble("Please resize your screen to continue"),y=screen.height - 3,start_frame=300)]
    for _ in range(20):
        fireworks = [(PalmFirework, 25, 30),(PalmFirework, 25, 30),(StarFirework, 25, 35),(StarFirework, 25, 35),(StarFirework, 25, 35),(RingFirework, 20, 30),(SerpentFirework, 30, 35),]
        firework, start, stop = choice(fireworks)
        effects.insert(1,firework(screen,randint(0, screen.width),randint(screen.height // 8, screen.height * 3 // 4),randint(start, stop),start_frame=randint(0, 250)))
    effects.append(Print(screen,
                         Rainbow(screen, FigletText("CONGRATULATIONS!")),
                         screen.height // 2 - 6,
                         speed=1,
                         start_frame=5))
    effects.append(Print(screen,
                         Rainbow(screen, FigletText("YOU HAVE SUCCESSFULLY BEATEN THE")),
                         screen.height // 2 + 1,
                         speed=1,
                         start_frame=5))
    effects.append(Print(screen,
                         Rainbow(screen, FigletText("DRAGON!")),
                         screen.height // 2 + 8,
                         speed=1,
                         start_frame=5))                   
    scenes.append(Scene(effects,-1,clear=True))
    screen.play(scenes, stop_on_resize=True)
def endscreen():
    screen_clear()
    print ("You have successfully come to the endscreen")
#stuff to be added here for the end screen
while True:
    try:
        Screen.wrapper(gameover)
        sys.exit(0)
    except ResizeScreenError:
        endscreen()
